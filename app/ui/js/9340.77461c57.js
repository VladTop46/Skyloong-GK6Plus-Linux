(self["webpackChunkkeyboard_driver"]=self["webpackChunkkeyboard_driver"]||[]).push([[9340],{24119:function(e,t,i){t=e.exports=i(54765)(void 0),t.push([e.id,".layout .sidebar[data-v-25c93491]{width:100%;min-width:100%}.el-radio-button__orig-radio:disabled+.el-radio-button__inner[data-v-25c93491]{color:#67696d;cursor:not-allowed;background-image:none;background-color:#383838;border-color:#111;box-shadow:none}.el-tabs--card[data-v-25c93491]{height:calc(100vh - 450px)}.el-tab-pane[data-v-25c93491]{height:calc(100vh - 450px);overflow-y:auto}.el-tabs__content[data-v-25c93491]{overflow-y:auto;padding:0px !important}.devinfo[data-v-25c93491]{position:absolute;display:inline-block;left:1rem;color:#0090cc;line-height:1.5rem;font-weight:bold}.devinfo span[data-v-25c93491]{color:#ababab;font-weight:bold}.dia-keyle .el-dialog__body[data-v-25c93491]{padding:0}.el-table .hidden-row[data-v-25c93491]{display:none}",""])},70127:function(e,t,i){t=e.exports=i(54765)(!1),t.push([e.id,"\n.el-input-group__prepend[data-v-4c887e01] {\n    width: 3rem;\n}\n.macrolist-oper[data-v-4c887e01] {\n    padding: .4rem 1rem;\n}\n.edit-cell[data-v-4c887e01] {\n    background: #333;\n    -webkit-appearance: none;\n    background-image: none;\n    border-radius: 4px;\n    border: 1px solid #111;\n    box-sizing: border-box;\n    color: #aaa;\n    display: inline-block;\n    font-size: inherit;\n    height: 1.6rem;\n    line-height: 1.6rem;\n    outline: 0;\n    padding: 0 1rem;\n    transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n    width: 100%;\n}\n.edit-cell.mini[data-v-4c887e01] {\n    width: 3rem;\n    padding: 0 .2rem;\n    text-align: center;\n}\n",""])},39340:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var n=function(){var e=this,t=e._self._c;return t("el-row",{staticClass:"layout has-sidebar"},[t("el-col",{attrs:{span:18}},[t("el-row",{style:{height:e.lay_h_show+"px",position:"relative"},attrs:{id:"device-show-box"}},[t("cms-device",{ref:"device",attrs:{disabled:"",deviceid:e.cms.deviceID,isediting:!1,isfnkeyset:e.isfnkeyset,keymap:e.device.keymap,scale:e.lay_show_scale,scaleplus:e.lay_show_scale_plus,showbtn:e.showdevbtn},on:{fnxChange:e.handleFnxChange,openFnLayer:e.openFnLayer,removeKeyFunc:e.removeKeyFunc,removeKeyLE:e.removeKeyLE,removeStdLE:e.removeStdLE,selLeKeys:e.selStaticLeKeys,selectStdLE:e.selectStdLE,showKeyLeSelect:e.showKeyLeSelect}}),t("div",{staticStyle:{width:"100%",position:"absolute",bottom:"0rem","z-index":"3"}},[t("el-radio-group",{staticStyle:{"margin-left":"1rem"},on:{change:e.changeProfile},model:{value:e.layerguid,callback:function(t){e.layerguid=t},expression:"layerguid"}},e._l(e.device.profiles,(function(i,n){return t("el-radio-button",{key:n,attrs:{"data-guid":i.GUID,label:i.GUID,disabled:1==i.ModeIndex&&e.disabledstd}},[1==i.ModeIndex?t("span",[e._v(e._s(e.$t("common.layer_std")))]):e._e(),2==i.ModeIndex||3==i.ModeIndex||4==i.ModeIndex?t("span",[e._v(e._s(e.$t("common")["layer_onboard_"+(i.ModeIndex-1)]))]):e._e(),0==i.ModeIndex?t("span",[e._v(e._s(e.$t("common")["layer_driver_"+(n-3)]))]):e._e()])})),1),t("el-button-group",{staticStyle:{"margin-left":".5rem"}},[t("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.is_restore_current_layer_to_default"),effect:"dark",placement:"top"}},[t("el-button",{attrs:{loading:e.isrestoring,icon:"el-icon-refresh"},on:{click:e.handleShowRestoreProfileConfirm}})],1),t("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.is_clear_current_config"),effect:"dark",placement:"top"}},[t("el-button",{attrs:{loading:e.isclearing,icon:"el-icon-delete",type:"danger"},on:{click:e.handleShowClearProfile}})],1),t("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.is_import_profile_to_current_layer"),effect:"dark",placement:"top"}},[t("el-button",{attrs:{disabled:e.disimportprofile,icon:"el-icon-upload2"},on:{click:e.handleImportProfile}})],1),t("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.is_export_current_layer"),effect:"dark",placement:"top"}},[t("el-button",{attrs:{disabled:e.disexportprofile,icon:"el-icon-download"},on:{click:e.handleExportProfile}})],1)],1),t("div",{staticStyle:{position:"absolute",right:"1rem",display:"inline-block"}},[t("el-button-group",{staticStyle:{"margin-right":".5rem"}},[t("el-button",{class:{"btn-breath":e.iskeysetchange},attrs:{icon:"el-icon-check"},on:{click:e.saveKeySet}},[e._v(e._s(e.$t("common.save"))+"\n            ")])],1),t("el-button-group",[t("el-button",{class:{"btn-breath":e.isapplied},attrs:{loading:e.isapplying,icon:"el-icon-download"},on:{click:e.applyProfile}},[e._v(e._s(e.$t("common.apply"))+"\n            ")])],1)],1)],1),t("div",{staticStyle:{width:"100%",position:"absolute",top:"1rem","z-index":"1"}},[t("div",{staticClass:"devinfo"},[t("span",[e._v(e._s(e.$t("common.model"))+": ")]),e._v(e._s(e.device.modelInfo.Name)),t("br"),t("span",[e._v(e._s(e.$t("common.firm_version"))+": ")]),e._v(e._s(e.device.FWVersion)+"\n        ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{position:"absolute",right:"1rem"}},[e.hasfnkeyset?t("el-switch",{staticStyle:{"margin-left":"1rem"},attrs:{"active-color":"#00A0DD","active-text":"Fn+X","inactive-color":"#666"},on:{change:e.handleIsFnKeySet},model:{value:e.isfnkeyset,callback:function(t){e.isfnkeyset=t},expression:"isfnkeyset"}}):e._e()],1)]),t("el-dialog",{attrs:{"before-close":e.handleCloseDialog,"show-close":e.dialog.isshowclose,visible:e.dialog.visible,center:"",width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[t("p",{attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.dialog.title))]),t("span",[e._v(e._s(e.dialog.content))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(t){e.dialog.visible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),t("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.handleConfirm}},[e._v(e._s(e.$t("common.confirm")))])],1)]),t("el-dialog",{staticClass:"dia-keyle",attrs:{"show-close":e.dialogkeylesel.isshowclose,visible:e.dialogkeylesel.visible,center:"",width:"25%"},on:{"update:visible":function(t){return e.$set(e.dialogkeylesel,"visible",t)}}},[t("p",{attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-circle-check"}),e._v(" "+e._s(e.dialogkeylesel.title))]),t("span",[t("el-table",{ref:"keylestable",attrs:{data:e.filterkeylelist,"show-header":!1,"row-class-name":e.dialogRowClassName,border:"",height:"250","highlight-current-row":"",size:"mini"},on:{"row-click":e.handleKeyLeRowChange}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(i){return[t("svg-icon",{attrs:{name:"light"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(i.row.Name))])]}}])})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(t){e.dialogkeylesel.visible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),t("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.handleKeyLeConfirm}},[e._v(e._s(e.$t("common.confirm")))])],1)])],1),t("el-row",{style:{height:e.lay_h_keys+"px"},attrs:{id:"device-keys-box"}},[t("cms-keyset",{ref:"keysets",on:{changeKeyFunc:e.changeKeyFunc,saveProfile:e.saveProfile}})],1)],1),t("el-col",{attrs:{span:6}},[t("aside",{staticClass:"sidebar"},[t("el-row",[t("el-tabs",{attrs:{stretch:""}},[t("el-tab-pane",{attrs:{label:e.$t("le.le_setting_title")}},[t("cms-lelist",{ref:"lelist",attrs:{title:e.$t("le.le_setting_title"),isstaticle:"true",leseltype:"1",lelist:e.cms.les,lesel:e.device.lesel},on:{playLE:e.playLE,saveModeLE:e.saveModeLE}})],1),t("el-tab-pane",{attrs:{label:e.$t("macro.macro_setting_title")}},[t("cms-macrolist",{ref:"macrolist",attrs:{macrolist:e.cms.macros},on:{setKeyMacro:e.setKeyMacro}})],1)],1)],1),t("el-row",[t("m-tab",{ref:"mousetab",staticStyle:{padding:"0.5rem"}})],1)],1)])],1)},o=[],s=(i(25276),i(26099),i(16034),i(38781),i(23500),i(38378)),a=i(24988),r=i(22606),l=i(7201),c=i(10088),d=i(43893),f=i(49271),u=i.n(f),m=document.getElementById("mainbox").offsetHeight,y=document.getElementById("mainbox").offsetWidth;window.KeyFunc=u();var h={data(){return{cms:window.CMS,device:window.DEVICE,mainh:m,mainw:y,scale:y/24*18/1200,layerguid:0,layeroper:"",isapplying:!1,isrestoring:!1,isclearing:!1,iskeysetchange:!1,ismodelechange:!1,isapplied:!1,isshowkeyset:!0,hasfnkeyset:!1,isfnkeyset:!1,disimportprofile:!1,disexportprofile:!1,dialog:{visible:!1,isshowclose:!1,title:"",content:"",dtype:0},dialogkeylesel:{visible:!1,isshowclose:!1,title:"",content:""},staticleh:150}},components:{"cms-device":s["default"],"m-tab":a["default"],"cms-keyset":r["default"],"cms-lelist":l["default"],"cms-lestatic":c["default"],"cms-macrolist":d["default"]},mounted(){DEVICE.currentProfile;var e=this;window.onresize=function(){return function(){e.mainh=document.getElementById("mainbox").offsetHeight,e.mainw=document.getElementById("mainbox").offsetWidth}()},window.DEVICE.ensureLoaded((function(){window.getProfileGuidByModeIndex(CMS.userConfig.ModelInit[CMS.deviceID].Mode,(function(t){e.changeProfile(t)}))})),e.$refs.device.isshowkeyset=e.isshowkeyset,DEVICE.isEditStaticLE=!1,DEVICE.editStaticLEColor="#ff0000"},watch:{mainh(e){this.mainh=e},mainw(e){this.mainw=e},"cms.deviceID":function(e,t){var i=this;e!==t&&0!==e&&setTimeout((function(){DEVICE.ensureLoaded((function(){window.getProfileGuidByModeIndex(CMS.userConfig.ModelInit[e].Mode,(function(e){i.changeProfile(e)}))}))}),200)},"device.modeIndex":function(e,t){var i=this;e!==t&&i.changeProfile(DEVICE.profiles[e-1].GUID)},"device.isEditStaticLE":function(e,t){var i=this;e!==t&&(i.$refs.device.ismutiselect=e,DEVICE.isEditStaticLE&&i.renderStaticLE(),window.isModeLEChange()?i.$refs.lelist.isbreath=!0:i.$refs.lelist.isbreath=!1)}},computed:{siderWidth(){return 27},mode:function(){return DEVICE.currentProfile?DEVICE.currentProfile.ModeIndex:1},hasModeLe:function(){return!!CMS.deviceConfig.hasModeLe},hasOnlineMode(){return!!CMS.deviceConfig.hasOnlineMode},lay_show_scale:function(){return CMS.deviceConfig.hasOwnProperty("ShowScalePlus")?this.mainw/24*18/1200+CMS.deviceConfig.ShowScalePlus:this.mainw/24*18/1200},lay_show_scale_plus:function(){return CMS.deviceConfig.hasOwnProperty("ShowScalePlus")?CMS.deviceConfig.ShowScalePlus:0},lay_h_show:function(){return this.mainh/5*3},lay_h_keys:function(){return this.mainh/5*2},lay_h_les:function(){return this.mainh/5*3},lay_h_macros:function(){return this.mainh/5*2},lay_h_les_list:function(){return this.mainh/5*3-48-84+16-this.staticleh+10},lay_h_macros_list:function(){return this.mainh/5*2-48-84-24},showdevbtn:function(){return 0===CMS.deviceConfig.DeviceType},filterkeylelist:function(){var e=[];return e=this.cms.les,e},disabledstd(){return 656801992===window.CMS.deviceID}},methods:{changeProfile:function(e){var t=this;if(t.layerguid=e,t.iskeysetchange=!1,t.isapplied=!1,t.isapplying=!1,t.hasfnkeyset=!1,t.isfnkeyset=!1,DEVICE.editKeyCode){var i=document.getElementById("key"+DEVICE.editKeyCode);i.classList.remove("key-breath"),DEVICE.editKeyCode=0}readProfile(CMS.deviceID,e,(function(e){if(e){DEVICE.currentProfile=e,window.cprofile=JSON.parse(JSON.stringify(e)),window.changeMode(CMS.deviceID,e.ModeIndex);try{t.$refs.keysets.isdrivermode=!1,t.$refs.device.isfnlayer=!1}catch(i){}if(0===e.ModeIndex&&(t.applyProfile(),t.$refs.keysets.isdrivermode=!0),1==e.ModeIndex){try{t.$refs.device.initStdKeyset()}catch(i){}t.disimportprofile=!0,t.disexportprofile=!0,DEVICE.stdlesel=e.DriverLE[0].GUID;try{t.$refs.lelist.disabled=!0,t.$refs.macrolist.disabled=!0,t.$refs.keysets.disabled=!0,t.$refs.mousetab.disabled=!0}catch(i){}}else{try{t.$refs.device.initKeyset(),t.disimportprofile=!0,t.disexportprofile=!0}catch(i){}e.ModeLE.GUID||t.renderStaticLE(),DEVICE.lesel=e.ModeLE.GUID;try{t.$refs.lelist.disabled=!1,t.$refs.macrolist.disabled=!1,t.$refs.keysets.disabled=!1,t.$refs.mousetab.disabled=!1}catch(i){}DEVICE.currentProfile.hasOwnProperty("FnKeySet")&&(t.hasfnkeyset=!0)}CMS.userConfig.ModelInit[CMS.deviceID].Mode!==e.ModeIndex&&(CMS.userConfig.ModelInit[CMS.deviceID].Mode=e.ModeIndex,window.writeUserConfig(CMS.userConfig))}else t.alertInfo("Read profile failed!","fail",800)}))},changeStdProfile:function(){},changeKeyFunc:function(e,t){this.$createElement;var i=this,n=[];if(n=i.isfnkeyset?DEVICE.currentProfile.FnKeySet:DEVICE.currentProfile.KeySet,"disable_enable"==t){for(var o=0;o<n.length;o++)"0x02000000"==n[o].DriverValue.toString()&&window.getDefaultKeySetByLcode(n[o].Index,(function(e){var t=document.getElementById("key"+n[o].Index);t&&(n[o].MenuName="",n[o].DriverValue=e.DriverValue,t.innerHTML="<span></span>",t.setAttribute("data-func",i.$t("common.key_func_no_config")),t.classList.remove("seted"),n[o].KeyLE&&""!==n[o].KeyLE.GUID&&t.classList.add("seted"))}));window.isKeySetChange()?this.iskeysetchange=!0:this.iskeysetchange=!1}else if("disable_all"==t||"disable_num"==t||"disable_fx"==t||"disable_pad"==t||"disable_letter"==t||"disable_symbol"==t||"disable_ctrls"==t||"disable_func9"==t||"disable_direction"==t){var s=window.KeyFunc[t].DriverValue.split(",");if("disable_all"==t){s=[];for(o=0;o<n.length;o++)s.push(n[o].Index.toString())}for(o=0;o<n.length;o++)if(s.indexOf(n[o].Index.toString())>=0){n[o].MenuName=window.KeyFunc["0x02000000"].Name,n[o].DriverValue=window.KeyFunc["0x02000000"].DriverValue;var a=document.getElementById("key"+n[o].Index);a&&(a.innerHTML="<span class='hasfunc'></span>",a.classList.add("seted"),a.children[0].classList.add(window.KeyFunc["0x02000000"].Icon),a.children[0].classList.add(window.KeyFunc["0x02000000"].ShowClass),a.setAttribute("data-func",i.$t("keys")[window.KeyFunc["0x02000000"].LangTitle]))}window.isKeySetChange()?this.iskeysetchange=!0:this.iskeysetchange=!1}else if(DEVICE.editKeyCode){var r=document.getElementById("key"+DEVICE.editKeyCode);r&&(window.KeyFunc[t]?(r.innerHTML="<span class='hasfunc'>"+i.$t("keys")[window.KeyFunc[t].LangTitle]+"</span>",r.setAttribute("data-func",i.$t("keys")[window.KeyFunc[t].LangTitle]),window.KeyFunc[t].Icon&&(r.children[0].classList.add(window.KeyFunc[t].Icon),r.children[0].innerHTML=""),window.KeyFunc[t].ShowClass&&r.children[0].classList.add(window.KeyFunc[t].ShowClass)):(e.length<=5?r.innerHTML="<span class='hasfunc'>"+e+"</span>":r.innerHTML="<span class='hasfunc'>"+e.substring(0,4)+"...</span>",r.setAttribute("data-func",e)),r.classList.add("seted"));for(o=0;o<n.length;o++)n[o].Index===DEVICE.editKeyCode&&(n[o].MenuName=e,n[o].DriverValue=t,e.indexOf(".exe")>0&&(n[o].DriverValue="0x0A030001",n[o].Task={},n[o].Task.Type="OpenURL",n[o].Task.Data={AppPath:t}),window.isKeySetChange()?this.iskeysetchange=!0:this.iskeysetchange=!1)}else i.alertInfo(i.$t("common.key_select_attention"),"warning",1e3)},setKeyMacro:function(e,t){var i=this,n=DEVICE.currentProfile.KeySet;if(i.isfnkeyset&&(n=DEVICE.currentProfile.FnKeySet),DEVICE.editKeyCode){var o=document.getElementById("key"+DEVICE.editKeyCode);o&&(o.innerHTML="<span class='hasfunc'>"+e+"</span>",o.classList.add("seted"),o.setAttribute("data-func",e));for(var s=0;s<n.length;s++)n[s].Index===DEVICE.editKeyCode&&(n[s].MenuPID=1,n[s].MenuName=e,n[s].DriverValue="0x0A010001",n[s].Task={Type:"Macro",Data:{}},n[s].Task.Data=t,window.isKeySetChange()?i.iskeysetchange=!0:i.iskeysetchange=!1)}else i.alertInfo(i.$t("common.key_select_attention"),"warning",1e3)},removeKeyFunc(){var e=this,t=document.getElementById("config_key").getAttribute("data-key"),i=[];i=e.isfnkeyset?DEVICE.currentProfile.FnKeySet:DEVICE.currentProfile.KeySet;for(var n=0;n<i.length;n++)if(i[n].Index==t){window.getDefaultKeySetByLcode(parseInt(t),(function(o){i[n].MenuPID="",i[n].MenuID="",i[n].MenuName="",i[n].DriverValue=o.DriverValue,delete i[n].Task,document.getElementById("config_key").innerHTML=e.$t("common.key_func_no_config"),document.getElementById("key"+t).innerHTML="<span></span>",document.getElementById("key"+t).setAttribute("data-func",e.$t("common.key_func_no_config")),i[n].KeyLE?""==i[n].KeyLE.GUID&&document.getElementById("key"+t).classList.remove("seted"):document.getElementById("key"+t).classList.remove("seted"),window.isKeySetChange()?e.iskeysetchange=!0:e.iskeysetchange=!1}));break}},changeKeyLE:function(e,t,i){if(0!==e){document.getElementById("key"+e).classList.add("seted");for(var n=0;n<DEVICE.currentProfile.KeySet.length;n++)DEVICE.currentProfile.KeySet[n].Index==e&&(DEVICE.currentProfile.KeySet[n].KeyLE={Name:t,GUID:i},document.getElementById("key"+e).setAttribute("data-le",t),window.isKeySetChange()?this.iskeysetchange=!0:this.iskeysetchange=!1)}},removeKeyLE(){for(var e=document.getElementById("config_key").getAttribute("data-key"),t=0;t<DEVICE.currentProfile.KeySet.length;t++)if(DEVICE.currentProfile.KeySet[t].Index==e){DEVICE.currentProfile.KeySet[t].KeyLE&&""!==DEVICE.currentProfile.KeySet[t].KeyLE.GUID&&(delete DEVICE.currentProfile.KeySet[t].KeyLE,document.getElementById("config_le").innerHTML=this.$t("common.key_le_no_config"),document.getElementById("key"+e).setAttribute("data-le",this.$t("common.key_le_no_config")),""==DEVICE.currentProfile.KeySet[t].MenuName&&document.getElementById("key"+e).classList.remove("seted"),window.isKeySetChange()?this.iskeysetchange=!0:this.iskeysetchange=!1);break}},saveProfile:function(){var e=this;window.writeProfile(CMS.deviceID,DEVICE.currentProfile.GUID,window.cprofile,(function(t){0===DEVICE.currentProfile.ModeIndex&&window.apply(CMS.deviceID,DEVICE.currentProfile.GUID,(function(t){var i="",n="success";t?i=e.$t("common.apply_success"):(i=e.$t("common.apply_fail"),n="error"),e.alertInfo(i,n,1e3)}))}))},saveKeySet:function(){var e=this;1!=DEVICE.currentProfile.ModeIndex?(window.cprofile.KeySet=JSON.parse(JSON.stringify(DEVICE.currentProfile.KeySet)),DEVICE.currentProfile.FnKeySet&&(window.cprofile.FnKeySet=JSON.parse(JSON.stringify(DEVICE.currentProfile.FnKeySet))),e.saveProfile()):e.saveStdLE(),e.iskeysetchange=!1,e.isapplied=!0},saveModeLE:function(){var e=this;1!=DEVICE.currentProfile.ModeIndex&&(JSON.stringify(DEVICE.currentProfile.ModeLE),window.cprofile.ModeLE=JSON.parse(JSON.stringify(DEVICE.currentProfile.ModeLE)),e.saveProfile(),e.$refs.lelist.isbreath=!1,e.isapplied=!0)},applyProfile:function(){var e=this;e.isapplying=!0,window.apply(CMS.deviceID,DEVICE.currentProfile.GUID,(function(t){var i="",n="success";t?i=e.$t("common.apply_success"):(i=e.$t("common.apply_fail"),n="error"),e.alertInfo(i,n,1e3),DEVICE.editKeyCode&&(document.getElementById("key"+DEVICE.editKeyCode).classList.remove("key-breath"),DEVICE.editKeyCode=""),e.isapplying=!1,e.isapplied=!1}))},handleIsShowKeySet:function(e){var t=this;window.localStorage.isshowkeyset=e,this.$refs.device.isshowkeyset=e,setTimeout((function(){1==DEVICE.currentProfile.ModeIndex?t.$refs.device.initStdKeyset():t.$refs.device.initKeyset()}),100)},handleIsFnKeySet:function(e){var t=this;setTimeout((function(){1==DEVICE.currentProfile.ModeIndex?t.$refs.device.initStdKeyset():t.$refs.device.initKeyset()}),100)},openFnLayer:function(e){var t=this;this.isfnkeyset=e,this.$nextTick((function(){t.handleIsFnKeySet(e)}))},selectStdLE:function(){this.dialogkeylesel.title=this.$t("common.key_le_select_attention"),this.dialogkeylesel.visible=!0},dialogRowClassName:function(e,t){switch(window.CMS.deviceID){case 656802004:if(1==Object.values(e)[0].Hidden)return"hidden-row";break;case 656802005:if(1==Object.values(e)[0].Hidden)return"hidden-row";break;case 656802006:if(1==Object.values(e)[0].Hidden)return"hidden-row";break;case 656802007:if(1==Object.values(e)[0].Hidden)return"hidden-row";break;default:return""}},saveStdLE:function(){DEVICE.currentProfile.hasOwnProperty("KeySet")&&(window.cprofile.KeySet=JSON.parse(JSON.stringify(DEVICE.currentProfile.KeySet))),window.cprofile.DriverLE=JSON.parse(JSON.stringify(DEVICE.currentProfile.DriverLE)),this.saveProfile()},removeStdLE:function(){var e=this;DEVICE.currentProfile.DriverLE[DEVICE.lestdindex].Name="",DEVICE.currentProfile.DriverLE[DEVICE.lestdindex].GUID="",document.getElementById("std_le_"+DEVICE.lestdindex).innerHTML=e.$t("common.key_le_no_config"),window.isStdLEChange()?e.iskeysetchange=!0:e.iskeysetchange=!1},handleFnxChange:function(){var e=this;window.isKeySetChange()?e.iskeysetchange=!0:e.iskeysetchange=!1},handleShowRestoreProfileConfirm:function(){var e=this;e.dialog.visible=!0,e.dialog.title=e.$t("common.attention"),e.dialog.content=e.$t("common.restore_currentprofile_confirm"),e.dialog.dtype=1},restoreCurrentProfile:function(){var e=this;window.restoreLayer(DEVICE.currentProfile.Index,!0).then((function(t){var i="",n="success";"0"==t?(i=e.$t("common.apply_fail"),n="error"):"1"==t?i=e.$t("common.profile_save_success"):"2"==t&&(i=e.$t("common.apply_success")),e.changeProfile(DEVICE.currentProfile.GUID),e.alertInfo(i,n,1e3),e.isrestoring=!1}))},handleShowClearProfile:function(){var e=this;e.dialog.visible=!0,e.dialog.title=e.$t("common.attention"),e.dialog.content=e.$t("common.clear_currentprofile_confirm"),e.dialog.dtype=2},clearCurrentProfile:function(){var e=this;window.clearLayer(DEVICE.currentProfile.ModeIndex,!0).then((function(t){var i="",n="success";"0"==t?(i=e.$t("common.apply_fail"),n="error"):"1"==t?i=e.$t("common.profile_save_success"):"2"==t&&(i=e.$t("common.apply_success")),e.changeProfile(DEVICE.currentProfile.GUID),e.alertInfo(i,n,1e3),e.isclearing=!1}))},handleConfirm:function(){var e=this;1==e.dialog.dtype?(e.isrestoring=!0,e.restoreCurrentProfile()):2==e.dialog.dtype&&(e.isclearing=!0,e.clearCurrentProfile()),e.dialog.visible=!1},handleImportProfile:function(){this.showTestInfo()},handleExportProfile:function(){this.showTestInfo()},handleCloseDialog:function(){},showKeyLeSelect:function(){this.dialogkeylesel.title=this.$t("common.key_le_select_attention"),this.dialogkeylesel.visible=!0},handleKeyLeRowChange:function(e,t,i){DEVICE.keylesel.Name=e.Name,DEVICE.keylesel.GUID=e.GUID},handleKeyLeConfirm:function(){var e=this;if(1==DEVICE.currentProfile.ModeIndex)DEVICE.currentProfile.DriverLE[DEVICE.lestdindex].Name=DEVICE.keylesel.Name,DEVICE.currentProfile.DriverLE[DEVICE.lestdindex].GUID=DEVICE.keylesel.GUID,document.getElementById("std_le_"+DEVICE.lestdindex).innerHTML=DEVICE.keylesel.Name,window.isStdLEChange()?e.iskeysetchange=!0:e.iskeysetchange=!1;else{var t=document.getElementById("config_key").getAttribute("data-key");document.getElementById("config_le").innerHTML=DEVICE.keylesel.Name,e.changeKeyLE(t,DEVICE.keylesel.Name,DEVICE.keylesel.GUID)}e.dialogkeylesel.visible=!1},playLE(){this.$refs.device.playLe()},stopLe(){DEVICE.timer&&(clearInterval(DEVICE.timer),DEVICE.timer=null);for(var e=0;e<DEVICE.keymap.length;e++){var t=DEVICE.keymap[e].LocationCode.toString();document.getElementById("le"+t)&&document.getElementById("le"+t).style.setProperty("background","#000")}},renderFrame:function(e){for(var t in e){var i=document.getElementById("le"+t);i&&i.style.setProperty("background",window.toJS(e[t]))}},renderStaticLE:function(){var e=this;e.stopLe();try{e.$refs.lelist.leUnSelectAll(),e.$refs.lelist.leselname=e.$t("le.diy_static_le")}catch(t){}DEVICE.currentProfile.ModeLE.GUID="",DEVICE.currentProfile.ModeLE.Name=e.$t("le.diy_static_le"),DEVICE.currentProfile.ModeLE.hasOwnProperty("LEData")||(DEVICE.currentProfile.ModeLE.LEData={}),e.renderFrame(DEVICE.currentProfile.ModeLE.LEData)},selStaticLeKeys:function(e,t){var i=this;DEVICE.currentProfile.ModeLE.hasOwnProperty("LEData")||(DEVICE.currentProfile.ModeLE.LEData={}),e.forEach((function(e){"#000000"===DEVICE.editStaticLEColor?DEVICE.currentProfile.ModeLE.LEData.hasOwnProperty(e)&&(delete DEVICE.currentProfile.ModeLE.LEData[e],document.getElementById("le"+e).style.setProperty("background","#000000")):DEVICE.currentProfile.ModeLE.LEData[e]=window.to16(DEVICE.editStaticLEColor)})),i.renderFrame(DEVICE.currentProfile.ModeLE.LEData),window.isModeLEChange()?i.$refs.lelist.isbreath=!0:i.$refs.lelist.isbreath=!1},alertInfo:function(e,t,i){this.$notify({title:e,type:t,duration:i,position:"bottom-left"})},showTestInfo(){var e=this;e.alertInfo(this.$t("common.func_in_dev_info"),"warning",1e3)}},beforeRouteEnter(e,t,i){CMS.isLoaded=!1,setTimeout((function(){i((function(e){setTimeout((function(){CMS.isLoaded=!0}),500)}))}),5)}},p=h,g=(i(93056),i(14486)),E=(0,g.A)(p,n,o,!1,null,"25c93491",null),v=E.exports},43893:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{staticStyle:{padding:"0px .5rem .5rem .5rem"},attrs:{span:24}},[t("el-card",{staticClass:"macrolist-tab",staticStyle:{position:"relative"}},[t("div",{staticClass:"disablediv",class:{disablehide:!e.disabled}}),t("el-input",{staticClass:"input-with-select",staticStyle:{"z-index":"3"},attrs:{placeholder:e.$t("common.input_search_text"),size:"mini"},model:{value:e.schfilter,callback:function(t){e.schfilter=t},expression:"schfilter"}},[t("el-select",{staticStyle:{width:"7rem"},attrs:{slot:"prepend",placeholder:e.$t("common.please_select")},on:{change:e.changeMacroType},slot:"prepend",model:{value:e.macrofilter,callback:function(t){e.macrofilter=t},expression:"macrofilter"}},e._l(e.macrolist,(function(e,i){return t("el-option",{key:e.index,attrs:{label:e.Name,value:i}})})),1),t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.filtermacrolist,"empty-text":e.$t("common.no_data"),height:"100%","show-header":!1,border:"","highlight-current-row":"",size:"mini"},on:{"current-change":e.handleCurrentChange}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(i){return[t("i",{staticClass:"el-icon-document"}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(i.row.Name))])]}}])})],1),t("div",{staticClass:"macrolist-oper"},[t("el-radio",{attrs:{label:1},model:{value:e.macrocfg.StopMode,callback:function(t){e.$set(e.macrocfg,"StopMode",t)},expression:"macrocfg.StopMode"}},[e._v(e._s(e.$t("macro.macro_btn_execute"))),t("input",{directives:[{name:"model",rawName:"v-model",value:e.macrocfg.Repeats,expression:"macrocfg.Repeats"}],staticClass:"edit-cell mini",domProps:{value:e.macrocfg.Repeats},on:{input:function(t){t.target.composing||e.$set(e.macrocfg,"Repeats",t.target.value)}}}),e._v(e._s(e.$t("macro.n_times_stop"))+"\n                ")]),t("br"),t("el-radio",{attrs:{label:2},model:{value:e.macrocfg.StopMode,callback:function(t){e.$set(e.macrocfg,"StopMode",t)},expression:"macrocfg.StopMode"}},[e._v(e._s(e.$t("macro.macro_btn_execute_release_to_stop"))+"\n                ")]),t("br"),t("el-radio",{attrs:{label:3},model:{value:e.macrocfg.StopMode,callback:function(t){e.$set(e.macrocfg,"StopMode",t)},expression:"macrocfg.StopMode"}},[e._v(e._s(e.$t("macro.macro_btn_execute_pressagain_to_stop"))+"\n                ")]),t("el-button",{staticStyle:{position:"absolute",right:".3rem",bottom:".4rem"},attrs:{loading:!1,icon:"el-icon-view"},on:{click:e.setMacro}},[e._v(e._s(e.$t("common.use"))+"\n                ")])],1)],1)],1)],1)},o=[],s=(i(2008),i(25276),i(26099),i(8779)),a={data(){return{loading:!0,schfilter:"",macrofilter:"",filtermacrolist:[],disabled:!1,macroname:"",macrocfg:{GUID:"",StopMode:1,Repeats:1}}},mixins:[s.A],props:["macrolist"],created:function(){},mounted:function(){var e=this;setTimeout((function(){e.filtermacrolist=e.macrolist[0].Data,e.loading=!1,e.macrofilter=e.macrolist[0].Name}),1e3)},watch:{schfilter:function(e,t){this.filtermacrolist=this.macrolist[0].Data.filter((function(t){return~t.Name.indexOf(e)}))}},methods:{changeMacroType(e){var t=this;t.filtermacrolist=t.macrolist[e].Data},handleCurrentChange(e){this.macroname=e.Name,this.macrocfg.GUID=e.GUID},setMacro(){var e=this;if(""!=e.macrocfg.GUID){var t=JSON.parse(JSON.stringify(this.macrocfg));t.Repeats=parseInt(t.Repeats),JSON.stringify(t),e.macroname,e.$emit("setKeyMacro",e.macroname,t)}else e.alertInfo("提示","请先选择要设置的宏！",800)},alertInfo:function(e,t,i){this.$notify({title:e,type:t,duration:i,position:"bottom"})}}},r=a,l=(i(20314),i(14486)),c=(0,l.A)(r,n,o,!1,null,"4c887e01",null),d=c.exports},93056:function(e,t,i){var n=i(24119);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(70534).A;o("28f1a285",n,!0,{})},20314:function(e,t,i){var n=i(70127);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(70534).A;o("74983465",n,!0,{})}}]);